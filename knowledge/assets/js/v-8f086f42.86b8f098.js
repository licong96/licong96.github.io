"use strict";(self.webpackChunkknowledge=self.webpackChunkknowledge||[]).push([[8584],{4106:(e,n,a)=>{a.r(n),a.d(n,{data:()=>r});const r={key:"v-8f086f42",path:"/web-developer/back-end/node/midwayjs.html",title:"框架 - Midway",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"注意事项",slug:"注意事项",children:[{level:3,title:"环境配置",slug:"环境配置",children:[]},{level:3,title:"项目部署",slug:"项目部署",children:[]}]},{level:2,title:"依赖注入",slug:"依赖注入",children:[]},{level:2,title:"sequelize-typescript",slug:"sequelize-typescript",children:[]},{level:2,title:"概念",slug:"概念",children:[{level:3,title:"Controller",slug:"controller",children:[]},{level:3,title:"获取 Application",slug:"获取-application",children:[]}]}],filePathRelative:"web-developer/back-end/node/midwayjs.md",git:{updatedTime:1676882536e3,contributors:[{name:"licong96",email:"licong19961204@gmail.com",commits:4},{name:"黎聪",email:"licong23@xdf.cn",commits:2}]}}},5075:(e,n,a)=>{a.r(n),a.d(n,{default:()=>v});var r=a(6252);const l=(0,r.Wm)("h1",{id:"框架-midway",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#框架-midway","aria-hidden":"true"},"#"),(0,r.Uk)(" 框架 - Midway")],-1),s={href:"http://www.midwayjs.org/docs/quickstart",target:"_blank",rel:"noopener noreferrer"},t=(0,r.Uk)("文档地址"),i={href:"http://www.midwayjs.org/docs/extensions/validate",target:"_blank",rel:"noopener noreferrer"},o=(0,r.Uk)("参数校验"),p={href:"http://www.midwayjs.org/docs/extensions/orm",target:"_blank",rel:"noopener noreferrer"},c=(0,r.Uk)("typescript - ORM - sequelize"),d={href:"https://github.com/sequelize/sequelize-typescript#type-inference",target:"_blank",rel:"noopener noreferrer"},u=(0,r.Uk)("DataType"),h=(0,r.uE)('<h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项" aria-hidden="true">#</a> 注意事项</h2><h3 id="环境配置" tabindex="-1"><a class="header-anchor" href="#环境配置" aria-hidden="true">#</a> 环境配置</h3><p>线上环境配置文件命名需要使用<code>config.prod.ts</code>，启动命令需要使用<code>NODE_ENV=production</code>，单词不能混淆，否者配置文件不会生效。</p><h3 id="项目部署" tabindex="-1"><a class="header-anchor" href="#项目部署" aria-hidden="true">#</a> 项目部署</h3><p>不要在本地运行<code>npm prune --production</code>移除开发依赖，这是不可逆转的操作，会导致后续的项目开发遇到问题。</p><h2 id="依赖注入" tabindex="-1"><a class="header-anchor" href="#依赖注入" aria-hidden="true">#</a> 依赖注入</h2><ol><li>使用 @Provide 装饰器暴露你的服务</li><li>在调用的代码处，使用 @Inject 装饰器注入你的服务</li><li>调用注入服务，执行对应的方法</li></ol><h2 id="sequelize-typescript" tabindex="-1"><a class="header-anchor" href="#sequelize-typescript" aria-hidden="true">#</a> sequelize-typescript</h2>',8),m={href:"https://github.com/RobinBuschmann/sequelize-typescript#readme",target:"_blank",rel:"noopener noreferrer"},k=(0,r.Uk)("sequelize-typescript 文档"),g=(0,r.uE)('<h2 id="概念" tabindex="-1"><a class="header-anchor" href="#概念" aria-hidden="true">#</a> 概念</h2><h3 id="controller" tabindex="-1"><a class="header-anchor" href="#controller" aria-hidden="true">#</a> Controller</h3><p>在常见的 MVC 架构中，C 即代表控制器，控制器用于负责 <strong>解析用户的输入，处理后返回相应的结果。</strong></p><p>一般来说，控制器常用于对用户的请求参数做一些校验，转换，调用复杂的业务逻辑，拿到相应的业务结果后进行数据组装，然后返回。</p><p>在 Midway 中，控制器 也承载了路由的能力，你可以将多个路由绑定到同一个方法上：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>@<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span>\n@<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;/main&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">async</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token string">&#39;Hello Midwayjs!&#39;</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="获取路由参数" tabindex="-1"><a class="header-anchor" href="#获取路由参数" aria-hidden="true">#</a> 获取路由参数</h4>',7),b={href:"http://www.midwayjs.org/docs/controller#%E8%A3%85%E9%A5%B0%E5%99%A8%E5%8F%82%E6%95%B0%E7%BA%A6%E5%AE%9A",target:"_blank",rel:"noopener noreferrer"},f=(0,r.Uk)("装饰器参数约定"),w=(0,r.Wm)("h3",{id:"获取-application",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#获取-application","aria-hidden":"true"},"#"),(0,r.Uk)(" 获取 Application")],-1),W={href:"http://www.midwayjs.org/docs/req_res_app#%E8%8E%B7%E5%8F%96%E6%96%B9%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"},y=(0,r.Uk)("获取全局配置"),v={render:function(e,n){const a=(0,r.up)("OutboundLink");return(0,r.wg)(),(0,r.j4)(r.HY,null,[l,(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,[(0,r.Wm)("p",null,[(0,r.Wm)("a",s,[t,(0,r.Wm)(a)])])]),(0,r.Wm)("li",null,[(0,r.Wm)("p",null,[(0,r.Wm)("a",i,[o,(0,r.Wm)(a)])])]),(0,r.Wm)("li",null,[(0,r.Wm)("p",null,[(0,r.Wm)("a",p,[c,(0,r.Wm)(a)])])]),(0,r.Wm)("li",null,[(0,r.Wm)("p",null,[(0,r.Wm)("a",d,[u,(0,r.Wm)(a)])])])]),h,(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,[(0,r.Wm)("a",m,[k,(0,r.Wm)(a)])])]),g,(0,r.Wm)("p",null,[(0,r.Wm)("a",b,[f,(0,r.Wm)(a)])]),w,(0,r.Wm)("p",null,[(0,r.Wm)("a",W,[y,(0,r.Wm)(a)])])],64)}}}}]);