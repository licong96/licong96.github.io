"use strict";(self.webpackChunkknowledge=self.webpackChunkknowledge||[]).push([[3098],{3334:(l,n,a)=>{a.r(n),a.d(n,{data:()=>s});const s={key:"v-151ec799",path:"/web-developer/front-end/architect/section-1.html",title:"阶段一：架构设计及创建脚手架开发",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"作品的数据结构设计",slug:"作品的数据结构设计",children:[]},{level:2,title:"导论",slug:"导论",children:[{level:3,title:"关键词",slug:"关键词",children:[]},{level:3,title:"学习方法",slug:"学习方法",children:[]},{level:3,title:"注意事项",slug:"注意事项",children:[]},{level:3,title:"研发流程",slug:"研发流程",children:[]}]},{level:2,title:"第 1 周：需求分析和架构设计",slug:"第-1-周-需求分析和架构设计",children:[{level:3,title:"需求分析",slug:"需求分析",children:[]},{level:3,title:"技术整体架构设计",slug:"技术整体架构设计",children:[]}]},{level:2,title:"第 2 周：脚手架架构设计和框架搭建",slug:"第-2-周-脚手架架构设计和框架搭建",children:[]},{level:2,title:"第 3 周：脚手架核心流程开发",slug:"第-3-周-脚手架核心流程开发",children:[]},{level:2,title:"第 4 周：脚手架命令注册和执行过程开发",slug:"第-4-周-脚手架命令注册和执行过程开发",children:[]},{level:2,title:"第 5 周：脚手架创建项目流程设计和开发",slug:"第-5-周-脚手架创建项目流程设计和开发",children:[{level:3,title:"关键",slug:"关键",children:[]},{level:3,title:"mongodb",slug:"mongodb",children:[]},{level:3,title:"命令行交互",slug:"命令行交互",children:[]}]},{level:2,title:"第 6 周：脚手架项目和组件初始化开发",slug:"第-6-周-脚手架项目和组件初始化开发",children:[]}],filePathRelative:"web-developer/front-end/architect/section-1.md",git:{updatedTime:1690944334e3,contributors:[{name:"licong96",email:"licong19961204@gmail.com",commits:3},{name:"licong23@xdf.cn",email:"licong23@xdf.cn",commits:1}]}}},8702:(l,n,a)=>{a.r(n),a.d(n,{default:()=>i});const s=(0,a(6252).uE)('<h1 id="阶段一-架构设计及创建脚手架开发" tabindex="-1"><a class="header-anchor" href="#阶段一-架构设计及创建脚手架开发" aria-hidden="true">#</a> 阶段一：架构设计及创建脚手架开发</h1><p>设计闭环： <img src="http://www.lcong.cn/assets/images/knowledge/computers/architect/闭环设计.png" alt="image"></p><p>项目之间的关系，架构设计图： <img src="http://www.lcong.cn/assets/images/knowledge/computers/architect/项目关系与架构设计图.png" alt="image"></p><p>模块关系图： <img src="http://www.lcong.cn/assets/images/knowledge/computers/architect/模块关系图.png" alt="image"></p><h3 id="作品的数据结构设计" tabindex="-1"><a class="header-anchor" href="#作品的数据结构设计" aria-hidden="true">#</a> 作品的数据结构设计</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token comment">// 作品</span>\n  <span class="token property">&quot;work&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;作品标题&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 配置项</span>\n    <span class="token property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 页面 body 的样式</span>\n    <span class="token property">&quot;components&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token comment">// components 是一个有序的数组</span>\n      <span class="token comment">// vnode格式</span>\n      <span class="token punctuation">{</span>\n        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;attrs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 样式属性</span>\n        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 文本内容</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;attrs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 样式属性</span>\n        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 文本内容</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 画布中当前选中的组件</span>\n  <span class="token property">&quot;activeComponentId&quot;</span><span class="token operator">:</span> <span class="token number">1</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h1 id="web-前端架构师阶段一" tabindex="-1"><a class="header-anchor" href="#web-前端架构师阶段一" aria-hidden="true">#</a> web 前端架构师阶段一</h1><h2 id="导论" tabindex="-1"><a class="header-anchor" href="#导论" aria-hidden="true">#</a> 导论</h2><h3 id="关键词" tabindex="-1"><a class="header-anchor" href="#关键词" aria-hidden="true">#</a> 关键词</h3><ul><li>流程图 - 分析需求的工具</li><li>全局思维、整体思维、闭环思维 - 架构师思维来分析需求</li><li>业务组件库 - 独立拆分出来，复用</li><li>自定义事件统计 - 业务的重要性，如何实现</li></ul><h3 id="学习方法" tabindex="-1"><a class="header-anchor" href="#学习方法" aria-hidden="true">#</a> 学习方法</h3><ul><li>要有耐心，不要一心想着写代码，需求和设计很重要</li><li>要坚信：技术永远都是为业务服务的，技术是实现业务增长的工具</li></ul><h3 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项" aria-hidden="true">#</a> 注意事项</h3><ul><li>不要关注细节，要看整体，看范围</li><li>设计是判断可行性，不确定的就调研以下</li><li>设计要考虑复杂度，越简单越好，不要过度设计，不要为了设计而设计</li></ul><h3 id="研发流程" tabindex="-1"><a class="header-anchor" href="#研发流程" aria-hidden="true">#</a> 研发流程</h3><ul><li><p>1.项目启动</p><ul><li>1.1 项目启动会</li><li>1.2 项目计划，项目角色划分</li></ul></li><li><p>2.需求</p><ul><li>2.1 编写需求</li><li>2.2 评审需求</li><li>2.3 UI 视觉稿评审</li></ul></li><li><p>3.技术方案设计</p><ul><li>3.1 技术难点调研</li><li>3.2 技术方案设计</li><li>3.3 技术方案评审</li></ul></li><li><p>4.开发</p><ul><li>4.1 写代码，包括单元测试</li><li>4.2 代码走查</li><li>4.3 合并代码</li><li>4.4 自测</li></ul></li><li><p>5.联调</p><ul><li>5.1 前后端联调</li><li>5.2 UI 视觉稿确认</li><li>5.3 产品需求确认</li></ul></li><li><p>6.测试</p><ul><li>6.1 提测</li><li>6.2 测试</li><li>6.3 修改 bug</li><li>6.4 测试准出</li></ul></li><li><p>7.上线</p><ul><li>7.1 预览环境上线</li><li>7.2 预览环境回归测试</li><li>7.3 线上环境上线</li><li>7.4 线上环境回归测试</li></ul></li><li><p>8.项目总结</p><ul><li>总结分析项目的进度、质量、风险、问题等，争取下次项目规避</li></ul></li></ul><h2 id="第-1-周-需求分析和架构设计" tabindex="-1"><a class="header-anchor" href="#第-1-周-需求分析和架构设计" aria-hidden="true">#</a> 第 1 周：需求分析和架构设计</h2><h3 id="需求分析" tabindex="-1"><a class="header-anchor" href="#需求分析" aria-hidden="true">#</a> 需求分析</h3><p>脱离业务的架构就是耍流氓。 架构师必须要深入理解需求、参与需求、看透需求背后的业务本质。</p><ul><li><p>熟悉产品需求</p><ul><li><p>以架构师的思维分析需求，不能只停留在表面实现需求，要考虑怎么实现能给业务带来增长</p><ul><li>全局思维、整体思维、闭环思维，不能只考虑自己，要全局考虑整个团队，要做到有输出、有输入、有结果</li></ul></li></ul></li><li><p>一个面试题，h5 抽奖需求的理解</p><ul><li>绘制出整个流程图</li></ul></li><li><p>项目的浅层需求</p><ul><li>需求指导设计，设计指导开发</li><li>分析表面需要实现的功能，如登录、创建作品、编辑、发布、访问作品等</li></ul></li><li><p>项目的深度需求</p><pre><code>- 通过浅层需求分析，进一步分析需求\n\n\t- 需求闭环\n\n\t\t- 数据统计\n\n\t\t\t- 分渠道统计\n\n- 作品的管理\n</code></pre><p>作品统计 作品发布 h5 后台管理</p><pre><code>\t- 作品发布url不能变\n\n\t\t- 支持多渠道\n\n\t- H5端需要分享\n\n\t\t- 要对业务增长负责\n\n\t- 后台管理\n\n\t\t- 数据统计\n\t\t- 作品管理\n\n\t\t\t- 能快速下线作品，防止有违规内容\n\n\t\t- 用户管理\n\n\t\t\t- 能快速冻结用户，防止有违规用户\n\n\t\t- 模板管理\n\n\t\t\t- 控制模板展示与隐藏\n</code></pre></li></ul><h3 id="技术整体架构设计" tabindex="-1"><a class="header-anchor" href="#技术整体架构设计" aria-hidden="true">#</a> 技术整体架构设计</h3><ul><li><p>分析需要哪些项目，各项目之间的关系</p><ul><li><p>B 端（中台）</p><ul><li>biz-editor-fe</li><li>biz-editor-server</li></ul></li><li><p>C 端（前台）</p><ul><li><p>H5</p><ul><li>SSR-server</li></ul></li></ul></li><li><p>管理后台（后台）</p><ul><li>admin-fe</li><li>admin-server</li></ul></li><li><p>独立的业务组件库</p><ul><li>组件平台</li></ul></li><li><p>自定义事件统计服务</p><ul><li><p>需求</p><ul><li><p>自定义事件埋点</p><ul><li>可区分参数与渠道</li></ul></li><li><p>分析统计</p></li><li><p>OpenAPI</p><ul><li>让 B 端可查看具体制作出的 H5 所有统计数据</li><li>管理后台也可以查看所有数据</li></ul></li></ul></li><li><p>自研</p><ul><li>日志收集</li><li>日志分析</li><li>OpenAPI</li></ul></li></ul></li><li><p>脚手架</p><ul><li>创建</li><li>发布</li></ul></li></ul></li><li><p>作品的数据结构设计</p><ul><li><p>几个问题</p><ul><li><ol><li>在点击”保持“按钮的时候，往服务端传递的数据结构是什么样子？</li></ol><ul><li>答：使用 vnode 结构，与 vue 的虚拟 dom 数据结构保持一致</li></ul></li><li><ol start="2"><li>如果保证画布和属性面板是同步更新的？</li></ol><ul><li>答：将数据存到 vuex 中，表示当前选中的组件</li></ul></li><li><ol start="3"><li>如果再扩展一个”图层“面板，数据结构该怎么设计？</li></ol><ul><li>答：使用单一数据源，数组结构，所有的图层都是 computed 计算出来的索引，而不是一个单独的数据</li></ul></li></ul></li><li><p>基本思路</p><ul><li>每个组件尽量符合 vnode 规范</li><li>用有序的数组来组织数据</li><li>尽量使用数组引用关系，数据不要冗余</li></ul></li><li><p>数据流转</p><ul><li><p>核心：B 端、C 端、管理后台，共用一个数据库</p><ul><li>创建作品：初始化一个 JSON 数据</li><li>保存作品：修改一个 JSON 数据</li><li>发布作品：修改一个标记状态</li><li>C 端浏览作品：获取 JSON 数据，SSR 渲染页面</li><li>屏蔽作品：修改一个标记状态，C 端来判断是否渲染</li></ul></li><li><p>从数据的角度去看整个流程</p></li></ul></li></ul></li><li><p>注意</p><ul><li><p>这一步千万不要抠细节，不要拿代码实例去对比</p><ul><li><p>做技术方案设计为的是寻找一个方向，论证：可行性、扩展性、复杂度高低</p><ul><li>保证设计的方向和思路是一样就行</li></ul></li></ul></li></ul></li><li><p>写《整体技术方案设计》文档</p><ul><li><p>学会如何写技术方案设计</p><ul><li><p>随性一些，解释一下你要如何做即可</p><ul><li>文字描述，画图，流程</li></ul></li><li><p>如果你写不出来，说明你没理解需求，正好暴露问题</p></li></ul></li><li><p>文档目录</p><ul><li><ol><li>需求</li></ol></li><li><ol start="2"><li>模块设计</li></ol><ul><li><p>模块的拆分和关系图</p></li><li><p>模块的关键功能</p></li><li><p>特殊模块重点说明</p><ul><li>组件库，同时用于编辑器和 H5</li><li>自研统计服务</li></ul></li></ul></li><li><ol start="3"><li>作品的数据结构</li></ol><ul><li>数据流转关系图</li></ul></li><li><ol start="4"><li>扩展性保证</li></ol><ul><li>扩展组件库</li><li>扩展编辑器的功能</li></ul></li><li><ol start="5"><li>开发提效</li></ol><ul><li>脚手架</li><li>组件平台</li></ul></li><li><ol start="6"><li>运维保障</li></ol><ul><li>线上服务和运维服务</li><li>安全</li><li>监控和报警</li><li>服务扩展性</li></ul></li></ul></li></ul></li></ul><h2 id="第-2-周-脚手架架构设计和框架搭建" tabindex="-1"><a class="header-anchor" href="#第-2-周-脚手架架构设计和框架搭建" aria-hidden="true">#</a> 第 2 周：脚手架架构设计和框架搭建</h2><ul><li>Lerna</li></ul><h2 id="第-3-周-脚手架核心流程开发" tabindex="-1"><a class="header-anchor" href="#第-3-周-脚手架核心流程开发" aria-hidden="true">#</a> 第 3 周：脚手架核心流程开发</h2><ul><li>准备阶段</li></ul><h2 id="第-4-周-脚手架命令注册和执行过程开发" tabindex="-1"><a class="header-anchor" href="#第-4-周-脚手架命令注册和执行过程开发" aria-hidden="true">#</a> 第 4 周：脚手架命令注册和执行过程开发</h2><ul><li>命令注册</li><li>node 多进程</li></ul><h2 id="第-5-周-脚手架创建项目流程设计和开发" tabindex="-1"><a class="header-anchor" href="#第-5-周-脚手架创建项目流程设计和开发" aria-hidden="true">#</a> 第 5 周：脚手架创建项目流程设计和开发</h2><h3 id="关键" tabindex="-1"><a class="header-anchor" href="#关键" aria-hidden="true">#</a> 关键</h3><ul><li>命令行交互</li><li>egg.js</li><li>mongodb</li></ul><h3 id="mongodb" tabindex="-1"><a class="header-anchor" href="#mongodb" aria-hidden="true">#</a> mongodb</h3><h3 id="命令行交互" tabindex="-1"><a class="header-anchor" href="#命令行交互" aria-hidden="true">#</a> 命令行交互</h3><h2 id="第-6-周-脚手架项目和组件初始化开发" tabindex="-1"><a class="header-anchor" href="#第-6-周-脚手架项目和组件初始化开发" aria-hidden="true">#</a> 第 6 周：脚手架项目和组件初始化开发</h2><ul><li>ejs 模板渲染</li><li>glob 文件筛选</li><li>项目标准安装和自定义安装</li><li>组件库初始化和安装</li></ul>',35),i={render:function(l,n){return s}}}}]);