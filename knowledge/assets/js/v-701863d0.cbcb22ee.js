"use strict";(self.webpackChunkknowledge=self.webpackChunkknowledge||[]).push([[1521],{1265:(e,a,n)=>{n.r(a),n.d(a,{data:()=>s});const s={key:"v-701863d0",path:"/web-developer/front-end/engineering/lerna.html",title:"Lerna",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"基本用法",slug:"基本用法",children:[{level:3,title:"全局安装",slug:"全局安装",children:[]},{level:3,title:"初始化一个项目",slug:"初始化一个项目",children:[]},{level:3,title:"创建模块",slug:"创建模块",children:[]},{level:3,title:"添加本地依赖",slug:"添加本地依赖",children:[]},{level:3,title:"添加公共依赖",slug:"添加公共依赖",children:[]},{level:3,title:"添加单独依赖",slug:"添加单独依赖",children:[]}]},{level:2,title:"常用命令",slug:"常用命令",children:[{level:3,title:"发布到内部 npm 私库",slug:"发布到内部-npm-私库",children:[]}]}],filePathRelative:"web-developer/front-end/engineering/lerna.md",git:{updatedTime:1674894334e3,contributors:[{name:"licong96",email:"licong19961204@gmail.com",commits:2}]}}},5140:(e,a,n)=>{n.r(a),n.d(a,{default:()=>c});var s=n(6252);const l=(0,s.Wm)("h1",{id:"lerna",tabindex:"-1"},[(0,s.Wm)("a",{class:"header-anchor",href:"#lerna","aria-hidden":"true"},"#"),(0,s.Uk)(" Lerna")],-1),r=(0,s.Wm)("p",null,"Lerna 是一个多包管理工具",-1),i={href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"},d=(0,s.Uk)("文档"),t=(0,s.uE)('<h2 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法" aria-hidden="true">#</a> 基本用法</h2><h3 id="全局安装" tabindex="-1"><a class="header-anchor" href="#全局安装" aria-hidden="true">#</a> 全局安装</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install --global lerna\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="初始化一个项目" tabindex="-1"><a class="header-anchor" href="#初始化一个项目" aria-hidden="true">#</a> 初始化一个项目</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lerna init\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="创建模块" tabindex="-1"><a class="header-anchor" href="#创建模块" aria-hidden="true">#</a> 创建模块</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>lerna create package-a\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="添加本地依赖" tabindex="-1"><a class="header-anchor" href="#添加本地依赖" aria-hidden="true">#</a> 添加本地依赖</h3><p>将模块 package-a 添加到 package-b 模块依赖中:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>larna <span class="token function">add</span> package-a --scope<span class="token operator">=</span>package-b\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>添加完成后会在 package-b 的 package.json 中增加以下依赖项</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;package-a&quot;</span><span class="token operator">:</span> <span class="token string">&quot;file:../package-a&quot;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>包依赖使用 file:来指定本地路径文件</p><h3 id="添加公共依赖" tabindex="-1"><a class="header-anchor" href="#添加公共依赖" aria-hidden="true">#</a> 添加公共依赖</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lerna add lodash\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="添加单独依赖" tabindex="-1"><a class="header-anchor" href="#添加单独依赖" aria-hidden="true">#</a> 添加单独依赖</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lerna add lodash --scope=package-b\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> 常用命令</h2><p>安装模块</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lerna add &lt;package&gt;[@version] [--dev] [--exact] [--peer]\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>安装依赖</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lerna bootstrap\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>发布</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lerna publish\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="发布到内部-npm-私库" tabindex="-1"><a class="header-anchor" href="#发布到内部-npm-私库" aria-hidden="true">#</a> 发布到内部 npm 私库</h3><ol><li>添加<code>.npmrc</code>文件</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>@xdf:registry<span class="token operator">=</span>http://10.117.1.99:4873/\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ol start="2"><li>执行发布命令</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>lerna publish --skip-git\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><p><code>--skip-git</code>：不要运行任何 git 命令</p></li><li><p><code>--force-publish [packages]</code>：强制发布 指定的一个或多个软件包</p></li></ul>',30),c={render:function(e,a){const n=(0,s.up)("OutboundLink");return(0,s.wg)(),(0,s.j4)(s.HY,null,[l,r,(0,s.Wm)("p",null,[(0,s.Wm)("a",i,[d,(0,s.Wm)(n)])]),t],64)}}}}]);