"use strict";(self.webpackChunkknowledge=self.webpackChunkknowledge||[]).push([[3707],{2338:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-f4eb91c6",path:"/computers/backend-developer/database/mysql.html",title:"MySQL",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"安装",slug:"安装",children:[]},{level:3,title:"启动",slug:"启动",children:[]},{level:3,title:"连接数据库",slug:"连接数据库",children:[]},{level:3,title:"修改密码",slug:"修改密码",children:[]},{level:3,title:"命令符",slug:"命令符",children:[]},{level:2,title:"数据库操作",slug:"数据库操作",children:[]},{level:2,title:"DDL语句",slug:"ddl语句",children:[{level:3,title:"数据库相关",slug:"数据库相关",children:[]},{level:3,title:"表相关",slug:"表相关",children:[]}]},{level:2,title:"DML语句",slug:"dml语句",children:[{level:3,title:"插入",slug:"插入",children:[]},{level:3,title:"蠕虫复制",slug:"蠕虫复制",children:[]},{level:3,title:"更新",slug:"更新",children:[]},{level:3,title:"删除",slug:"删除",children:[]}]},{level:2,title:"DQL语句",slug:"dql语句",children:[{level:3,title:"模糊查询",slug:"模糊查询",children:[]},{level:3,title:"范围查询",slug:"范围查询",children:[]},{level:3,title:"where条件",slug:"where条件",children:[]},{level:3,title:"排序",slug:"排序",children:[]},{level:3,title:"聚合函数",slug:"聚合函数",children:[]},{level:3,title:"分页查询",slug:"分页查询",children:[]},{level:3,title:"关键字",slug:"关键字",children:[]},{level:3,title:"表连接",slug:"表连接",children:[]}]},{level:2,title:"数据库约束",slug:"数据库约束",children:[{level:3,title:"主键",slug:"主键",children:[]},{level:3,title:"唯一约束",slug:"唯一约束",children:[]}]},{level:2,title:"Datatype数据类型",slug:"datatype数据类型",children:[{level:3,title:"常用类型",slug:"常用类型",children:[]},{level:3,title:"数值类型",slug:"数值类型",children:[]},{level:3,title:"日期和时间类型",slug:"日期和时间类型",children:[]},{level:3,title:"字符串类型",slug:"字符串类型",children:[]}]},{level:2,title:"运算符",slug:"运算符",children:[]}],filePathRelative:"computers/backend-developer/database/mysql.md",git:{updatedTime:1639115274e3,contributors:[{name:"黎聪",email:"licong23@xdf.cn",commits:3}]}}},1202:(n,s,a)=>{a.r(s),a.d(s,{default:()=>l});const e=(0,a(6252).uE)('<h1 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> MySQL</h1><ul><li><a href="%E5%AE%89%E8%A3%85">安装使用</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C">数据库操作</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A6%E6%9D%9F">数据库约束</a></li></ul><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><p>使用管理员身份运行<code>cmd</code>，进入安装路径的bin文件：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd C:\\Users\\licong23\\code\\node\\mysql-8.0.25-winx64\\bin\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行安装：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mysqld --install\n// Service successfully installed.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行移除：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mysqld --remov\n// Service successfully removed\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h3><ol><li><p>到电脑服务窗口中启动</p></li><li><p>命令方式启动</p></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>net start mysql\n// MySQL 服务正在启动.\n// MySQL 服务已经启动成功.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="连接数据库" tabindex="-1"><a class="header-anchor" href="#连接数据库" aria-hidden="true">#</a> 连接数据库</h3><p>命令行连接：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mysql -u root -p\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>连接远程mysql:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mysql --host=[ip] --user=root --password=123456\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>命令行退出:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>exit\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="修改密码" tabindex="-1"><a class="header-anchor" href="#修改密码" aria-hidden="true">#</a> 修改密码</h3><p>原始密码：</p><ul><li>账号: root</li><li>密码: 123456</li></ul><p>执行以下语句，即可将密码改为<code>123456</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;123456&#39;;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="命令符" tabindex="-1"><a class="header-anchor" href="#命令符" aria-hidden="true">#</a> 命令符</h3><ul><li><code>;</code> 表示每一行的结束。</li><li><code>\\h</code> 显示帮助内容。</li><li><code>\\c</code> 清除命令行。</li><li><code>[where condition]</code> 查询条件。</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>数据存储的位置被称为<code>表</code>，表存储的位置被称为<code>数据库</code>。我们需要先建数据库，然后建表，然后插入数据，再进行查询。</p><p>建数据库 -&gt; 建表 -&gt; 插入数据 -&gt; 查询。</p></div><h2 id="数据库操作" tabindex="-1"><a class="header-anchor" href="#数据库操作" aria-hidden="true">#</a> 数据库操作</h2><p>SQL查询语言分类:</p><ul><li><p><strong>数据定义语言</strong>： 简称DDL (Data Definition Language)</p><ul><li>用来定义数据库对象: 数据库、表、列；关键字：create、drop、alter等</li></ul></li><li><p><strong>数据操作语言</strong>： 简称DML (Data Manipulation Language)</p><ul><li>用来对数据库中表的数据进行增删改。关键字： insert、update、delete等</li></ul></li><li><p><strong>数据查询语言</strong>： 简称DQL(Data Query Language)</p><ul><li>用来查询数据库中表的数据，关键字： select from where等</li></ul></li><li><p><strong>数据控制语言</strong>： 简称DCL(Data Control Language)</p><ul><li>用来定义数据库访问权限和安全级别，创建用户等。关键字： grant等</li></ul></li></ul><h2 id="ddl语句" tabindex="-1"><a class="header-anchor" href="#ddl语句" aria-hidden="true">#</a> DDL语句</h2><p><strong>用来操作<code>数据库</code>以及<code>表</code>的<code>create</code>、<code>drop</code>、<code>alter</code>等</strong></p><h3 id="数据库相关" tabindex="-1"><a class="header-anchor" href="#数据库相关" aria-hidden="true">#</a> 数据库相关</h3><p>查看已有的数据库：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>创建新的数据库<code>dbname</code>：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">[</span>dbname<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>切换数据库：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> <span class="token punctuation">[</span>dbname<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查看当前使用的数据库：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>删除数据库：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token punctuation">[</span>dbname<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="表相关" tabindex="-1"><a class="header-anchor" href="#表相关" aria-hidden="true">#</a> 表相关</h3><p>查看数据库中的表：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>创建表：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>type_name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>复制一个相同的表结构：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>new_table_name<span class="token punctuation">]</span> <span class="token operator">like</span> <span class="token punctuation">[</span>old_table_name<span class="token punctuation">]</span>\n<span class="token comment">// 使用`like`关键字</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>删除表：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>修改表名：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">rename</span> <span class="token punctuation">[</span>new_table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查看表的基本信息：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">desc</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>修改表结构：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">modify</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>type_name<span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>对表结构增加一个字段：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">add</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>type_name<span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>对表结构删除一个字段：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">drop</span> <span class="token keyword">column</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="dml语句" tabindex="-1"><a class="header-anchor" href="#dml语句" aria-hidden="true">#</a> DML语句</h2><p><strong>对<code>表</code>进行<code>insert</code>、<code>delete</code>、<code>update</code></strong></p><h3 id="插入" tabindex="-1"><a class="header-anchor" href="#插入" aria-hidden="true">#</a> 插入</h3><p>注意事项：</p><ul><li>值与字段必须对应，个数相同，类型相同</li><li>值的数据大小必须在字段的长度范围内</li><li>除了数值类型外，其它字段类型的值必须使用引号</li><li>如果要插入空值，可以使用<code>NULL</code>，这个不用加单引号</li></ul><p>指定字段名，插入数据：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>不指定字段名，一一对应全部插入数据：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>一次性插入多条数据：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">values</span>\n<span class="token punctuation">(</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">(</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">(</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="蠕虫复制" tabindex="-1"><a class="header-anchor" href="#蠕虫复制" aria-hidden="true">#</a> 蠕虫复制</h3><ol><li>创建，先复制表结构：</li></ol><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>new_table_name<span class="token punctuation">]</span> <span class="token operator">like</span> <span class="token punctuation">[</span>old_table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ol start="2"><li>再将数据复制到新表中：</li></ol><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">[</span>new_table_name<span class="token punctuation">]</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>old_table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>或者只复制部分数据到新表中：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">[</span>new_table_name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>old_table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="更新" tabindex="-1"><a class="header-anchor" href="#更新" aria-hidden="true">#</a> 更新</h3><ul><li>默认的安全策略，使得更新时，如果不依靠主键列进行查询时将被提示并失败。</li><li>解决方式：SET SQL_SAFE_UPDATES = 0;</li></ul><p>不带条件，将全部修改：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">set</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>带条件修改，一条：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">set</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;value&#39;</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>带条件修改，多条：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">set</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#39;value&#39;</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="删除" tabindex="-1"><a class="header-anchor" href="#删除" aria-hidden="true">#</a> 删除</h3><p>删除指定条件的数据：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>不指定条件，全部删除：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>清空整张表的数据，并重新创建一个新的相同表结构：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="dql语句" tabindex="-1"><a class="header-anchor" href="#dql语句" aria-hidden="true">#</a> DQL语句</h2><p><strong>对<code>表</code>进行各种维度<code>select</code>查询</strong></p><p>查询表中所有数据：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查指定的数据项：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>条件查询：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>去重：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查询结果参与运算：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">-- 参与运算的必须是数值类型，可以是固定值也可以是其它字段名</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="模糊查询" tabindex="-1"><a class="header-anchor" href="#模糊查询" aria-hidden="true">#</a> 模糊查询</h3><p><strong>在select中的like表示模糊查询</strong></p><p>通配符有两个：</p><ol><li><code>%</code>：表示0个或多个字符</li><li><code>_</code>：表示一个字符</li></ol><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">where</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token operator">like</span> <span class="token string">&#39;%value%&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="范围查询" tabindex="-1"><a class="header-anchor" href="#范围查询" aria-hidden="true">#</a> 范围查询</h3><p>两种方式：</p><ol><li>使用比较运算符</li><li>使用<code>between</code>加<code>and</code></li></ol><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">where</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token operator">between</span> <span class="token string">&#39;value&#39;</span> <span class="token operator">and</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="where条件" tabindex="-1"><a class="header-anchor" href="#where条件" aria-hidden="true">#</a> where条件</h3><ul><li>比较运算符: <code>&gt;</code> <code>&lt;</code> <code>&gt;=</code> <code>&lt;=</code> <code>==</code> <code>!=</code> <code>&lt;&gt;</code></li><li>逻辑运算符: <code>and</code> <code>or</code> <code>not</code> <code>in()</code> <code>not in()</code></li><li>位运算符</li><li>算数运算符</li></ul><h3 id="排序" tabindex="-1"><a class="header-anchor" href="#排序" aria-hidden="true">#</a> 排序</h3><p>order by：</p><ul><li><code>ASC</code>: 升序，默认</li><li><code>DESC</code>: 降序</li></ul><p>单列排序，只通过一个字段排序：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">where</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span> <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">desc</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>组合排序，先通过第一个字段排序，如果相同，再通过第二个字段：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">where</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span> <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">desc</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">desc</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">desc</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="聚合函数" tabindex="-1"><a class="header-anchor" href="#聚合函数" aria-hidden="true">#</a> 聚合函数</h3><p>可以对纵向查询，对一列的值进行计算，然后返回一个结果，会忽略空值。</p><ul><li>聚合函数： <ul><li><code>count</code> 统计数量</li><li><code>sum</code> 求和</li><li><code>max</code> 最大值</li><li><code>min</code> 最小值</li><li><code>svg</code> 平均值</li></ul></li><li><code>group by</code>：关键字表示对分类聚合的字段进行分组</li><li><code>with</code>：表示对汇总之后的记录进行再次汇总</li><li><code>having</code>：表示对分类后的结果再进行条件的过滤</li></ul><p>计算总数<code>count</code>：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>分组<code>group by</code>，要结合聚合函数使用，计算某一组中的数据：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>分组<code>group by</code>加<code>having</code>一起使用，在分组之后添加条件：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">where</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span> <span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>having与where的区别：</strong></p><ul><li>having是在分组后对数据进行过滤。</li><li>where是在分组前对数据进行过滤。</li><li>having后面可以使用聚合函数。</li><li>where后面不可以使用聚合函数。</li></ul><h3 id="分页查询" tabindex="-1"><a class="header-anchor" href="#分页查询" aria-hidden="true">#</a> 分页查询</h3><p>使用<code>limit</code>语句，限制查询记录。</p><p>语法格式：</p><ul><li><code>offset</code>: 是值偏移量，默认为0</li><li><code>length</code>: 是值需要查询的总条数</li></ul><p>跳过前面20条，查询后10条：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">limit</span> <span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>完整例子：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span><span class="token operator">|</span><span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">as</span> 别名<span class="token punctuation">]</span> <span class="token keyword">from</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">where</span> <span class="token punctuation">[</span><span class="token keyword">where</span> condition<span class="token punctuation">]</span> <span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">having</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">[</span>Field_name<span class="token punctuation">]</span> <span class="token keyword">desc</span> <span class="token keyword">limit</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="关键字" tabindex="-1"><a class="header-anchor" href="#关键字" aria-hidden="true">#</a> 关键字</h3><ul><li><code>distinct</code> 去重。</li><li><code>where</code> 条件查询。</li><li><code>order by</code> 排序，<code>desc</code>降序排列，<code>asc</code>升序排列。</li><li><code>limit</code> 限制，只查询指定条数。</li><li><code>group by</code> 分组</li></ul><h3 id="表连接" tabindex="-1"><a class="header-anchor" href="#表连接" aria-hidden="true">#</a> 表连接</h3><h2 id="数据库约束" tabindex="-1"><a class="header-anchor" href="#数据库约束" aria-hidden="true">#</a> 数据库约束</h2><p><strong>保证数据的正确性、有效性和完整性</strong></p><p>约束种类：</p><ul><li>PK(PRIMARY KEY): 主键约束</li><li>NN(NOT NULL): 非空约束</li><li>UQ(UNIQUE): 唯一约束索引</li><li>DEFAULT: 默认值约束</li><li>AI(AUTO_INCREMENT): 自动增加</li><li>外键</li></ul><h3 id="主键" tabindex="-1"><a class="header-anchor" href="#主键" aria-hidden="true">#</a> 主键</h3><p><code>PRIMARY KEY</code>，用来唯一标识一条记录，每个表都应该有一个主键，且只能有一个。</p><p>通常不用业务字段作为主键，而是把id作为主键。主键是给数据库和程序使用的，不是给用户使用的，可以没有含义，但是不能重复，且有值。</p><p><strong>特点：</strong></p><ul><li>主键必须包含唯一的值</li><li>主键列不能包含NULL值</li></ul><p><strong><code>AUTO_INCREMENT</code> 主键自增</strong></p><ul><li>将id设为主键，并且设置自增。</li></ul><p><strong>主键起始值默认为1，修改为100</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="唯一约束" tabindex="-1"><a class="header-anchor" href="#唯一约束" aria-hidden="true">#</a> 唯一约束</h3><p>添加<code>UNIQUE</code>：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>table_name<span class="token punctuation">]</span> <span class="token punctuation">(</span>\n\tid <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>\n\tphone <span class="token keyword">int</span> <span class="token keyword">UNIQUE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="datatype数据类型" tabindex="-1"><a class="header-anchor" href="#datatype数据类型" aria-hidden="true">#</a> Datatype数据类型</h2><ul><li>数值类型</li><li>日期和时间类型</li><li>字符串类型</li></ul><h3 id="常用类型" tabindex="-1"><a class="header-anchor" href="#常用类型" aria-hidden="true">#</a> 常用类型</h3><ul><li>int - 整型</li><li>double - 浮点型</li><li>varchar - 字符串型</li><li>data - 日期类型</li></ul><h3 id="数值类型" tabindex="-1"><a class="header-anchor" href="#数值类型" aria-hidden="true">#</a> 数值类型</h3><p><strong>严格数值类型：</strong></p><ul><li>INTEGER</li><li>SMALLINT</li><li>DECIMAL</li><li>NUMERIC</li></ul><p><strong>近似数值数据类型：</strong></p><ul><li>FLOAT</li><li>REAL</li><li>DOUBLE PRECISION</li></ul><p><strong>还有经过扩展之后的数据类型：</strong></p><ul><li>TINYINT</li><li>MEDIUMINT</li><li>BIGINT</li><li>BIT</li></ul><h4 id="整数" tabindex="-1"><a class="header-anchor" href="#整数" aria-hidden="true">#</a> 整数</h4><ul><li>TINYINT ，占用 1 字节</li><li>SMALLINT，占用 2 字节</li><li>MEDIUMINT，占用 3 字节</li><li>INT、INTEGER，占用 4 字节</li><li>BIGINT，占用 8 字节</li></ul><h4 id="小数" tabindex="-1"><a class="header-anchor" href="#小数" aria-hidden="true">#</a> 小数</h4><p><strong>浮点数：</strong></p><ul><li>单精度浮点型 - float 型</li><li>双精度浮点型 - double 型</li></ul><p><strong>定点数：</strong></p><ul><li>decimal</li></ul><h3 id="日期和时间类型" tabindex="-1"><a class="header-anchor" href="#日期和时间类型" aria-hidden="true">#</a> 日期和时间类型</h3><ul><li><code>year</code>: 日期格式<code>YYYY</code></li><li><code>time</code>: 日期格式<code>HH:MM:SS</code></li><li><code>date</code>: 日期格式<code>YYYY-MM-DD</code></li><li><code>datetime</code>: 日期格式<code>YYYY-MM-DD HH:MM:SS</code></li><li><code>timestamp</code>: 日期格式<code>YYYY-MM-DD HH:MM:SS UTC</code></li></ul><h3 id="字符串类型" tabindex="-1"><a class="header-anchor" href="#字符串类型" aria-hidden="true">#</a> 字符串类型</h3><ul><li><code>char</code>: M为0~255之间的整数；会去掉尾部空格；</li><li><code>varchar</code>: M为0~65535之间的整数；会保留尾部空格；</li><li><code>longtext</code>: 极大文本数据</li><li><code>binary</code>和<code>varbinary</code>: 包含二进制字符串。</li><li><code>blob</code>: 一个二进制大对象。</li><li><code>enum</code>: 枚举类型，会转换为大写。</li></ul><h2 id="运算符" tabindex="-1"><a class="header-anchor" href="#运算符" aria-hidden="true">#</a> 运算符</h2><ul><li>算数运算符</li><li>比较运算符</li><li>逻辑运算符</li><li>位运算符</li></ul>',187),l={render:function(n,s){return e}}}}]);