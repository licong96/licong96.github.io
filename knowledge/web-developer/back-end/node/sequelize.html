<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <link rel="icon" href="/knowledge/favicon.png"><title>Sequelize | knowledge</title><meta name="description" content="I know & I don`t know"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.22">
    <link rel="preload" href="/knowledge/assets/js/runtime~app.79ad14cd.js" as="script"><link rel="preload" href="/knowledge/assets/css/styles.3cba2898.css" as="style"><link rel="preload" href="/knowledge/assets/js/4640.ac7f9124.js" as="script"><link rel="preload" href="/knowledge/assets/js/app.ece2aedc.js" as="script">
    <link rel="stylesheet" href="/knowledge/assets/css/styles.3cba2898.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/knowledge/" class=""><!----><span class="site-name">knowledge</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="计算机核心基础"><span class="title">计算机核心基础</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="计算机核心基础"><span class="title">计算机核心基础</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/computers-core/README.md" class="nav-link" aria-label="知识体系"><!--[--><!--]--> 知识体系 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/constitute.md" class="nav-link" aria-label="计算机组成原理"><!--[--><!--]--> 计算机组成原理 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/operating-system" class="nav-link" aria-label="计算机操作系统与编译原理"><!--[--><!--]--> 计算机操作系统与编译原理 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/internet" class="nav-link" aria-label="计算机通信与网络"><!--[--><!--]--> 计算机通信与网络 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/data-structure-algorithm" class="nav-link" aria-label="数据结构与算法"><!--[--><!--]--> 数据结构与算法 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/database-system.md" class="nav-link" aria-label="数据库系统"><!--[--><!--]--> 数据库系统 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="web开发"><span class="title">web开发</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="web开发"><span class="title">web开发</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/web-developer/front-end/" class="nav-link" aria-label="前端开发"><!--[--><!--]--> 前端开发 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/web-developer/back-end/" class="nav-link router-link-active" aria-label="后端开发"><!--[--><!--]--> 后端开发 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/web-developer/project-design/" class="nav-link" aria-label="项目设计与想法"><!--[--><!--]--> 项目设计与想法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>算法工程师</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/knowledge/ai/python/" class="nav-link" aria-label="python"><!--[--><!--]--> python <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/ai/machine-learning/" class="nav-link" aria-label="机器学习"><!--[--><!--]--> 机器学习 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/ai/computer-vision/" class="nav-link" aria-label="CV算法工程师"><!--[--><!--]--> CV算法工程师 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/ai/natural-language-processing/" class="nav-link" aria-label="NLP算法工程师"><!--[--><!--]--> NLP算法工程师 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/algorithms/math/" class="nav-link" aria-label="数学"><!--[--><!--]--> 数学 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/learn/meta/" class="nav-link" aria-label="元学习"><!--[--><!--]--> 元学习 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/learn/college-course/" class="nav-link" aria-label="大学课程"><!--[--><!--]--> 大学课程 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/learn/subject/" class="nav-link" aria-label="学科"><!--[--><!--]--> 学科 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/learn/task/" class="nav-link" aria-label="课题"><!--[--><!--]--> 课题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/more/language/" class="nav-link" aria-label="二语习得"><!--[--><!--]--> 二语习得 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/more/dress-collocation/" class="nav-link" aria-label="穿搭"><!--[--><!--]--> 穿搭 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="计算机核心基础"><span class="title">计算机核心基础</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="计算机核心基础"><span class="title">计算机核心基础</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/computers-core/README.md" class="nav-link" aria-label="知识体系"><!--[--><!--]--> 知识体系 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/constitute.md" class="nav-link" aria-label="计算机组成原理"><!--[--><!--]--> 计算机组成原理 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/operating-system" class="nav-link" aria-label="计算机操作系统与编译原理"><!--[--><!--]--> 计算机操作系统与编译原理 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/internet" class="nav-link" aria-label="计算机通信与网络"><!--[--><!--]--> 计算机通信与网络 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/data-structure-algorithm" class="nav-link" aria-label="数据结构与算法"><!--[--><!--]--> 数据结构与算法 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/computers-core/database-system.md" class="nav-link" aria-label="数据库系统"><!--[--><!--]--> 数据库系统 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="web开发"><span class="title">web开发</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="web开发"><span class="title">web开发</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/web-developer/front-end/" class="nav-link" aria-label="前端开发"><!--[--><!--]--> 前端开发 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/web-developer/back-end/" class="nav-link router-link-active" aria-label="后端开发"><!--[--><!--]--> 后端开发 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/web-developer/project-design/" class="nav-link" aria-label="项目设计与想法"><!--[--><!--]--> 项目设计与想法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>算法工程师</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/knowledge/ai/python/" class="nav-link" aria-label="python"><!--[--><!--]--> python <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/ai/machine-learning/" class="nav-link" aria-label="机器学习"><!--[--><!--]--> 机器学习 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/ai/computer-vision/" class="nav-link" aria-label="CV算法工程师"><!--[--><!--]--> CV算法工程师 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/ai/natural-language-processing/" class="nav-link" aria-label="NLP算法工程师"><!--[--><!--]--> NLP算法工程师 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/knowledge/algorithms/math/" class="nav-link" aria-label="数学"><!--[--><!--]--> 数学 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/learn/meta/" class="nav-link" aria-label="元学习"><!--[--><!--]--> 元学习 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/learn/college-course/" class="nav-link" aria-label="大学课程"><!--[--><!--]--> 大学课程 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/learn/subject/" class="nav-link" aria-label="学科"><!--[--><!--]--> 学科 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/learn/task/" class="nav-link" aria-label="课题"><!--[--><!--]--> 课题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/knowledge/more/language/" class="nav-link" aria-label="二语习得"><!--[--><!--]--> 二语习得 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/knowledge/more/dress-collocation/" class="nav-link" aria-label="穿搭"><!--[--><!--]--> 穿搭 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/knowledge/web-developer/back-end/" class="nav-link router-link-active sidebar-heading sidebar-item active" aria-label="后端开发"><!--[--><!--]--> 后端开发 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/knowledge/web-developer/back-end/server/" class="nav-link sidebar-item" aria-label="服务器"><!--[--><!--]--> 服务器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/knowledge/web-developer/back-end/server/terminal.html" class="nav-link sidebar-item" aria-label="终端命令"><!--[--><!--]--> 终端命令 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/server/nginx.html" class="nav-link sidebar-item" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/server/docker.html" class="nav-link sidebar-item" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/server/pm2.html" class="nav-link sidebar-item" aria-label="PM2"><!--[--><!--]--> PM2 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/server/shell.html" class="nav-link sidebar-item" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/server/linux.html" class="nav-link sidebar-item" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/database/" class="nav-link sidebar-item" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/knowledge/web-developer/back-end/database/mysql.html" class="nav-link sidebar-item" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/database/redis.html" class="nav-link sidebar-item" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/database/MongoDB.html" class="nav-link sidebar-item" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/database/case1-mooc.html" class="nav-link sidebar-item" aria-label="案例-慕课网数据库"><!--[--><!--]--> 案例-慕课网数据库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/database/case2-retail.html" class="nav-link sidebar-item" aria-label="案例-新零售数据库设计"><!--[--><!--]--> 案例-新零售数据库设计 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/" class="nav-link router-link-active sidebar-item active" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/knowledge/web-developer/back-end/node/node-modules.html" class="nav-link sidebar-item" aria-label="Node Modules 模块系统"><!--[--><!--]--> Node Modules 模块系统 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/node-async.html" class="nav-link sidebar-item" aria-label="Node 异步编程"><!--[--><!--]--> Node 异步编程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/node-fs.html" class="nav-link sidebar-item" aria-label="Node 文件和系统操作"><!--[--><!--]--> Node 文件和系统操作 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/node-http.html" class="nav-link sidebar-item" aria-label="Node 网络与 API"><!--[--><!--]--> Node 网络与 API <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/node-packages.html" class="nav-link sidebar-item" aria-label="Node 常用 npm 包"><!--[--><!--]--> Node 常用 npm 包 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/node-command.html" class="nav-link sidebar-item" aria-label="Node 命令行与环境变量"><!--[--><!--]--> Node 命令行与环境变量 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/node-process.html" class="nav-link sidebar-item" aria-label="Node 子进程"><!--[--><!--]--> Node 子进程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/my-node-server.html" class="nav-link sidebar-item" aria-label="我的 Node-server 服务"><!--[--><!--]--> 我的 Node-server 服务 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Sequelize"><!--[--><!--]--> Sequelize <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#概念" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="概念"><!--[--><!--]--> 概念 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#模型" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="模型"><!--[--><!--]--> 模型 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#模型查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="模型查询"><!--[--><!--]--> 模型查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#数据类型" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="数据类型"><!--[--><!--]--> 数据类型 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#列参数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="列参数"><!--[--><!--]--> 列参数 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#使用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用"><!--[--><!--]--> 使用 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#安装使用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="安装使用"><!--[--><!--]--> 安装使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#连接数据库和建模" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="连接数据库和建模"><!--[--><!--]--> 连接数据库和建模 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#创建记录" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="创建记录"><!--[--><!--]--> 创建记录 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#查询记录" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="查询记录"><!--[--><!--]--> 查询记录 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#连表查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="连表查询"><!--[--><!--]--> 连表查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#修改记录" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="修改记录"><!--[--><!--]--> 修改记录 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#删除记录" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="删除记录"><!--[--><!--]--> 删除记录 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#关联" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="关联"><!--[--><!--]--> 关联 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#将-fooid-列添加到-bar-中" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="将 fooId 列添加到 Bar 中"><!--[--><!--]--> 将 fooId 列添加到 Bar 中 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#自定义外键" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="自定义外键"><!--[--><!--]--> 自定义外键 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#其它用法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="其它用法"><!--[--><!--]--> 其它用法 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/knowledge/web-developer/back-end/node/sequelize.html#attributes" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="attributes"><!--[--><!--]--> attributes <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/typeORM.html" class="nav-link sidebar-item" aria-label="TypeORM"><!--[--><!--]--> TypeORM <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/midwayjs.html" class="nav-link sidebar-item" aria-label="框架 - Midway"><!--[--><!--]--> 框架 - Midway <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/kao2.html" class="nav-link sidebar-item" aria-label="框架 - Kao2"><!--[--><!--]--> 框架 - Kao2 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/node/egg.html" class="nav-link sidebar-item" aria-label="框架 - Egg.js"><!--[--><!--]--> 框架 - Egg.js <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/java/" class="nav-link sidebar-item" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/knowledge/web-developer/back-end/java/1.basics.html" class="nav-link sidebar-item" aria-label="基础知识"><!--[--><!--]--> 基础知识 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/java/oop.html" class="nav-link sidebar-item" aria-label="面向对象编程"><!--[--><!--]--> 面向对象编程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/java/operational-database.html" class="nav-link sidebar-item" aria-label="JDBC 操作数据库"><!--[--><!--]--> JDBC 操作数据库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/java/maven.html" class="nav-link sidebar-item" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/java/design-mode.html" class="nav-link sidebar-item" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/java/spring.html" class="nav-link sidebar-item" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/wechat/" class="nav-link sidebar-item" aria-label="微信开发"><!--[--><!--]--> 微信开发 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/knowledge/web-developer/back-end/wechat/login.html" class="nav-link sidebar-item" aria-label="微信登录"><!--[--><!--]--> 微信登录 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/wechat/wx-share.html" class="nav-link sidebar-item" aria-label="微信分享"><!--[--><!--]--> 微信分享 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/wechat/cgi-bin.html" class="nav-link sidebar-item" aria-label="Node.js开发公众号"><!--[--><!--]--> Node.js开发公众号 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/tools/" class="nav-link sidebar-item" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/knowledge/web-developer/back-end/tools/database.html" class="nav-link sidebar-item" aria-label="数据库工具"><!--[--><!--]--> 数据库工具 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/tools/node-monitoring.html" class="nav-link sidebar-item" aria-label="node 性能监控工具"><!--[--><!--]--> node 性能监控工具 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/tools/file-upload.html" class="nav-link sidebar-item" aria-label="文件上传"><!--[--><!--]--> 文件上传 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/" class="nav-link sidebar-item" aria-label="练习"><!--[--><!--]--> 练习 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/knowledge/web-developer/back-end/practice/case1-blogs.html" class="nav-link sidebar-item" aria-label="案例-开发 Web Server 博客"><!--[--><!--]--> 案例-开发 Web Server 博客 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/case2-microblog.html" class="nav-link sidebar-item" aria-label="案例-Koa2 框架生态模拟新浪微博"><!--[--><!--]--> 案例-Koa2 框架生态模拟新浪微博 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/case3-old-island.html" class="nav-link sidebar-item" aria-label="案例-Koa2+MySQL 开发旧岛项目"><!--[--><!--]--> 案例-Koa2+MySQL 开发旧岛项目 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/case4-book-admin.html" class="nav-link sidebar-item" aria-label="案例-企业通用管理后台系统-电子书"><!--[--><!--]--> 案例-企业通用管理后台系统-电子书 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/juvenil-competition.html" class="nav-link sidebar-item" aria-label="练习-赛事中心"><!--[--><!--]--> 练习-赛事中心 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/arbor-day-2022.html" class="nav-link sidebar-item" aria-label="练习-植树节"><!--[--><!--]--> 练习-植树节 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/simulation-subject.html" class="nav-link sidebar-item" aria-label="练习-模拟选科"><!--[--><!--]--> 练习-模拟选科 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/practice/nursery.html" class="nav-link sidebar-item" aria-label="练习-托育项目"><!--[--><!--]--> 练习-托育项目 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/knowledge/web-developer/back-end/issue/" class="nav-link sidebar-item" aria-label="我遇到过的问题"><!--[--><!--]--> 我遇到过的问题 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="sequelize" tabindex="-1"><a class="header-anchor" href="#sequelize" aria-hidden="true">#</a> Sequelize</h1><p><a href="https://www.sequelize.com.cn/" target="_blank" rel="noopener noreferrer">官网文档地址<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><a href="https://sequelize.org/v5/manual/data-types.html" target="_blank" rel="noopener noreferrer">Datatypes 文档<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="概念" tabindex="-1"><a class="header-anchor" href="#概念" aria-hidden="true">#</a> 概念</h2><h3 id="模型" tabindex="-1"><a class="header-anchor" href="#模型" aria-hidden="true">#</a> 模型</h3><p>模型是 Sequelize 的本质. 模型是代表数据库中表的抽象。</p><p>模型也是 ES6 类. 类的实例表示该模型中的一个对象(该对象映射到数据库中表的一行)</p><p>几乎每个 Sequelize 方法都是异步的。</p><h3 id="模型查询" tabindex="-1"><a class="header-anchor" href="#模型查询" aria-hidden="true">#</a> 模型查询</h3><h4 id="使用嵌套数组来重命名属性" tabindex="-1"><a class="header-anchor" href="#使用嵌套数组来重命名属性" aria-hidden="true">#</a> 使用嵌套数组来重命名属性：</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Model<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  attributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;baz&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;qux&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>等同于：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> foo<span class="token punctuation">,</span> bar <span class="token keyword">AS</span> baz<span class="token punctuation">,</span> qux <span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="使用-sequelize-fn-进行聚合" tabindex="-1"><a class="header-anchor" href="#使用-sequelize-fn-进行聚合" aria-hidden="true">#</a> 使用 sequelize.fn 进行聚合：</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Model.findAll({
  attributes: [
    &#39;foo&#39;,
    [sequelize.fn(&#39;COUNT&#39;, sequelize.col(&#39;hats&#39;)), &#39;n_hats&#39;],
    &#39;bar&#39;
  ]
});
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>等同于:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> foo<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>hats<span class="token punctuation">)</span> <span class="token keyword">AS</span> n_hats<span class="token punctuation">,</span> bar <span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>使用聚合函数时,必须为它提供一个别名,以便能够从模型中访问它。</p><p>也可以在<code>attributes</code>中搭配<code>include</code>或<code>exclude</code>使用。</p><h3 id="数据类型" tabindex="-1"><a class="header-anchor" href="#数据类型" aria-hidden="true">#</a> 数据类型</h3><ul><li><a href="https://www.sequelize.com.cn/core-concepts/model-basics#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer">数据类型文档地址<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><h3 id="列参数" tabindex="-1"><a class="header-anchor" href="#列参数" aria-hidden="true">#</a> 列参数</h3><ul><li><a href="https://www.sequelize.com.cn/core-concepts/model-basics#%E5%88%97%E5%8F%82%E6%95%B0" target="_blank" rel="noopener noreferrer">列参数文档地址<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><h4 id="where-子句" tabindex="-1"><a class="header-anchor" href="#where-子句" aria-hidden="true">#</a> WHERE 子句</h4><ul><li><p><a href="https://www.sequelize.com.cn/core-concepts/model-querying-basics#%E5%BA%94%E7%94%A8-where-%E5%AD%90%E5%8F%A5" target="_blank" rel="noopener noreferrer">where 语句操作符文档<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p></li><li><p><a href="https://www.sequelize.com.cn/core-concepts/model-querying-basics#%E6%93%8D%E4%BD%9C%E7%AC%A6" target="_blank" rel="noopener noreferrer">Op 操作符文档<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p></li></ul><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><p>ORM 工具，映射到数据库，像操作对象一样去操作数据库。团队中一般不会直接写 sql 去操作数据库，而是使用 ORM 工具。</p><ul><li>建模（外键） &amp; 同步到数据库</li><li>增删改查 &amp; 连表查询</li><li>数据表，用 JS 中的模型（class）代替</li><li>一条或多条记录，用 JS 中一个对象或数组代替</li><li>sql 语句，用对象方法代替</li></ul><h3 id="安装使用" tabindex="-1"><a class="header-anchor" href="#安装使用" aria-hidden="true">#</a> 安装使用</h3><p>安装 sequelize：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> sequelize
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>安装 mysql：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> mysql2
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="连接数据库和建模" tabindex="-1"><a class="header-anchor" href="#连接数据库和建模" aria-hidden="true">#</a> 连接数据库和建模</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Sequelize <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;sequelize&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> seq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sequelize</span><span class="token punctuation">(</span><span class="token string">&#39;case2-microblog&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  host<span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span>
  dialect<span class="token operator">:</span> <span class="token string">&#39;mysql&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

seq
  <span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">{</span> force<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sync&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>建模：</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 创建 User 模型，创建后的表名是users</span>
<span class="token keyword">const</span> User <span class="token operator">=</span> seq<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// id 会自动创建，并设为主键、自增</span>
  userName<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span> <span class="token comment">// varchar(255)</span>
    allowNull<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不为空</span>
    unique<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 唯一性</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
    allowNull<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  nickName<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
    comment<span class="token operator">:</span> <span class="token string">&#39;昵称&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 注释</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 会自动创建`createdAt`和`updatedAt`</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>外键关联：</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Blog<span class="token punctuation">.</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建外键 Blog.userId -&gt; User.id</span>
  foreignKey<span class="token operator">:</span> <span class="token string">&#39;userId&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 另一种写法</span>
User<span class="token punctuation">.</span><span class="token function">hasMany</span><span class="token punctuation">(</span>Blog<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建外键 Blog.userId -&gt; User.id</span>
  foreignKey<span class="token operator">:</span> <span class="token string">&#39;userId&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="创建记录" tabindex="-1"><a class="header-anchor" href="#创建记录" aria-hidden="true">#</a> 创建记录</h3><p>使用<code>create</code>创建一条记录：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  userName<span class="token operator">:</span> <span class="token string">&#39;licong&#39;</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span>
  nickName<span class="token operator">:</span> <span class="token string">&#39;阿聪&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>dataValues<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用<code>bulkCreate</code>创建多条记录：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">bulkCreate</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      userName<span class="token operator">:</span> <span class="token string">&#39;licong&#39;</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span>
      nickName<span class="token operator">:</span> <span class="token string">&#39;阿聪&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      userName<span class="token operator">:</span> <span class="token string">&#39;zhangsan&#39;</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span>
      nickName<span class="token operator">:</span> <span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> returning<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token comment">// returning: true 返回结果信息</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>dataValues<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="查询记录" tabindex="-1"><a class="header-anchor" href="#查询记录" aria-hidden="true">#</a> 查询记录</h3><ul><li>findOne</li><li>findAll</li><li>findAndCountAll</li></ul><h4 id="查询一条记录使用findone" tabindex="-1"><a class="header-anchor" href="#查询一条记录使用findone" aria-hidden="true">#</a> 查询一条记录使用<code>findOne</code>：</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> licong <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// attributes: [&#39;userName&#39;, &#39;nickName&#39;],	// 查询特定的列</span>
  where<span class="token operator">:</span> <span class="token punctuation">{</span>
    userName<span class="token operator">:</span> <span class="token string">&#39;licong&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>licong<span class="token punctuation">.</span>dataValues<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="查询多条记录使用findall" tabindex="-1"><a class="header-anchor" href="#查询多条记录使用findall" aria-hidden="true">#</a> 查询多条记录使用<code>findAll</code>：</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> blogs <span class="token operator">=</span> <span class="token keyword">await</span> Blog<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  where<span class="token operator">:</span> <span class="token punctuation">{</span>
    userId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  limit<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 限制本次查询 2 条</span>
  offset<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 跳过 1 条</span>
  order<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;desc&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 排序</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blog</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> blog<span class="token punctuation">.</span>dataValues<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="查询总数使用findandcountall" tabindex="-1"><a class="header-anchor" href="#查询总数使用findandcountall" aria-hidden="true">#</a> 查询总数使用<code>findAndCountAll</code>：</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> blogListAndCount <span class="token operator">=</span> <span class="token keyword">await</span> Blog<span class="token punctuation">.</span><span class="token function">findAndCountAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  where<span class="token operator">:</span> <span class="token punctuation">{</span>
    userId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  limit<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  offset<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  order<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;desc&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 排序</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blogListAndCount<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 返回所有总条数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blogListAndCount<span class="token punctuation">.</span>rows<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blog</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> blog<span class="token punctuation">.</span>dataValues<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="setdatavalue-设置值" tabindex="-1"><a class="header-anchor" href="#setdatavalue-设置值" aria-hidden="true">#</a> setDataValue 设置值</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>instance<span class="token punctuation">.</span><span class="token function">setDataValue</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="getdatavalue-获取值" tabindex="-1"><a class="header-anchor" href="#getdatavalue-获取值" aria-hidden="true">#</a> getDataValue 获取值</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>instance<span class="token punctuation">.</span><span class="token function">getDataValue</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="连表查询" tabindex="-1"><a class="header-anchor" href="#连表查询" aria-hidden="true">#</a> 连表查询</h3><p>查 Blog 表包含上 User 表：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> blogListWithUser <span class="token operator">=</span> <span class="token keyword">await</span> Blog<span class="token punctuation">.</span><span class="token function">findAndCountAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  order<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;desc&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  include<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      model<span class="token operator">:</span> User<span class="token punctuation">,</span>
      attributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;userName&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      where<span class="token operator">:</span> <span class="token punctuation">{</span>
        userName<span class="token operator">:</span> <span class="token string">&#39;licong&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blogListWithUser<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  blogListWithUser<span class="token punctuation">.</span>rows<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blog</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> blogVal <span class="token operator">=</span> blog<span class="token punctuation">.</span>dataValues
    blogVal<span class="token punctuation">.</span>user <span class="token operator">=</span> blogVal<span class="token punctuation">.</span>user<span class="token punctuation">.</span>dataValues
    <span class="token keyword">return</span> blogVal
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 要使用这种方式外键关联</span>
Blog<span class="token punctuation">.</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>User<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建外键 Blog.userId -&gt; User.id</span>
  foreignKey<span class="token operator">:</span> <span class="token string">&#39;userId&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>查 User 表包含上 Blog 表：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> userListWithBlog <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">findAndCountAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  attributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;userName&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;nickName&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  include<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      model<span class="token operator">:</span> Blog<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  userListWithBlog<span class="token punctuation">.</span>rows<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userVal <span class="token operator">=</span> user<span class="token punctuation">.</span>dataValues
    <span class="token comment">// 每个用户有多条数据</span>
    userVal<span class="token punctuation">.</span>blogs <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>userVal<span class="token punctuation">.</span>blogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blog</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> blog<span class="token punctuation">.</span>dataValues<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> userVal
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 要使用这种方式外键关联</span>
User<span class="token punctuation">.</span><span class="token function">hasMany</span><span class="token punctuation">(</span>Blog<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建外键 Blog.userId -&gt; User.id</span>
  foreignKey<span class="token operator">:</span> <span class="token string">&#39;userId&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="模型-表-之间的关联关系" tabindex="-1"><a class="header-anchor" href="#模型-表-之间的关联关系" aria-hidden="true">#</a> 模型(表)之间的关联关系</h4><p>数据库中的表之间存在一定的关联关系，表之间的关系基于<code>主/外</code>键进行关联、创建约束等。关系表中的数据分为<code>1对1(1:1)</code>、<code>1对多(1:M)</code>、<code>多对多(N:M)</code>三种关联关系。</p><ul><li><code>hasOne</code>: 添加外键到目标模，与目标模型建立<code>1:1</code>关联关系，关联关系(外键)存在于<code>目标模型</code>中。</li><li><code>belongsTo</code>: 为当前模型添加外键，与目标模型建立<code>1:1</code>关联关系，关联关系(外键)存在于<code>源模型</code>中。</li><li><code>hasMany</code>: 添加外键到目标模型，与目标模型建立<code>1:N</code>关联关系，关联关系(外键)存在于<code>目标模型</code>中。</li><li><code>belongsToMany</code>: 与目标模型建立<code>N:M</code>关联关系，会创建交叉表。</li></ul><h3 id="修改记录" tabindex="-1"><a class="header-anchor" href="#修改记录" aria-hidden="true">#</a> 修改记录</h3><p>修改一条记录使用<code>update</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> updateRes <span class="token operator">=</span> <span class="token keyword">await</span> Blog<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&#39;修改标题&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    where<span class="token operator">:</span> <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>updateRes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="删除记录" tabindex="-1"><a class="header-anchor" href="#删除记录" aria-hidden="true">#</a> 删除记录</h3><p>删除一条记录使用<code>destroy</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> destroyRes <span class="token operator">=</span> <span class="token keyword">await</span> Blog<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  where<span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>destroyRes <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="关联" tabindex="-1"><a class="header-anchor" href="#关联" aria-hidden="true">#</a> 关联</h2><p><a href="https://www.sequelize.com.cn/core-concepts/assocs" target="_blank" rel="noopener noreferrer">关联文档<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>Sequelize 提供了 四种 关联类型,并将它们组合起来以创建关联：</p><ul><li>HasOne 关联类型</li><li>BelongsTo 关联类型</li><li>HasMany 关联类型</li><li>BelongsToMany 关联类型</li></ul><p>关联的定义顺序是有关系的. 换句话说,对于这四种情况,定义顺序很重要. 在上述所有示例中,<code>A 称为 源 模型</code>,而 <code>B 称为 目标 模型</code>. 此术语很重要.</p><h3 id="将-fooid-列添加到-bar-中" tabindex="-1"><a class="header-anchor" href="#将-fooid-列添加到-bar-中" aria-hidden="true">#</a> 将 fooId 列添加到 Bar 中</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Foo<span class="token punctuation">.</span><span class="token function">hasOne</span><span class="token punctuation">(</span>Bar<span class="token punctuation">)</span>
Bar<span class="token punctuation">.</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>等同于：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">&quot;foos&quot;</span> <span class="token punctuation">(</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">&quot;bars&quot;</span> <span class="token punctuation">(</span>
  <span class="token comment">/* ... */</span>
  <span class="token string">&quot;fooId&quot;</span> <span class="token keyword">INTEGER</span> <span class="token keyword">REFERENCES</span> <span class="token string">&quot;foos&quot;</span> <span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="自定义外键" tabindex="-1"><a class="header-anchor" href="#自定义外键" aria-hidden="true">#</a> 自定义外键</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 方法 1</span>
Foo<span class="token punctuation">.</span><span class="token function">hasOne</span><span class="token punctuation">(</span>Bar<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  foreignKey<span class="token operator">:</span> <span class="token string">&#39;myFooId&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Bar<span class="token punctuation">.</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span>

<span class="token comment">// 方法 2</span>
Foo<span class="token punctuation">.</span><span class="token function">hasOne</span><span class="token punctuation">(</span>Bar<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  foreignKey<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;myFooId&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Bar<span class="token punctuation">.</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="其它用法" tabindex="-1"><a class="header-anchor" href="#其它用法" aria-hidden="true">#</a> 其它用法</h2><h3 id="attributes" tabindex="-1"><a class="header-anchor" href="#attributes" aria-hidden="true">#</a> attributes</h3><p>返回指定字段：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  attributes: [&#39;id&#39;, &#39;name&#39;, &#39;code&#39;]
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>排除指定字段：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  attributes: {
    exclude: [&#39;createdAt&#39;, &#39;updatedAt&#39;, &#39;deletedAt&#39;]
  }
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>有这两种用法就不需要再改写全局<code>Model.prototype.toJSON</code>，但是两者不可同时使用。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2023/3/13 09:53:21</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: licong19961204@gmail.com">licong96</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/knowledge/web-developer/back-end/node/my-node-server.html" class="nav-link" aria-label="我的 Node-server 服务"><!--[--><!--]--> 我的 Node-server 服务 <!--[--><!--]--></a></span><span class="next"><a href="/knowledge/web-developer/back-end/node/typeORM.html" class="nav-link" aria-label="TypeORM"><!--[--><!--]--> TypeORM <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/knowledge/assets/js/runtime~app.79ad14cd.js" defer></script><script src="/knowledge/assets/js/4640.ac7f9124.js" defer></script><script src="/knowledge/assets/js/app.ece2aedc.js" defer></script>
  </body>
</html>
