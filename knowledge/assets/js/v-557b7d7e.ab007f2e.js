"use strict";(self.webpackChunkknowledge=self.webpackChunkknowledge||[]).push([[3580],{8675:(e,n,a)=>{a.r(n),a.d(n,{data:()=>s});const s={key:"v-557b7d7e",path:"/web-developer/front-end/engineering/verdaccio.html",title:"Verdaccio 私库",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"安装 Verdaccio",slug:"安装-verdaccio",children:[]},{level:2,title:"使用 Verdaccio",slug:"使用-verdaccio",children:[]},{level:2,title:"cli 命令",slug:"cli-命令",children:[]},{level:2,title:"内部包和外部包之间",slug:"内部包和外部包之间",children:[]}],filePathRelative:"web-developer/front-end/engineering/verdaccio.md",git:{updatedTime:1653039634e3,contributors:[{name:"licong96",email:"licong19961204@gmail.com",commits:1},{name:"黎聪",email:"licong23@xdf.cn",commits:1}]}}},8416:(e,n,a)=>{a.r(n),a.d(n,{default:()=>k});var s=a(6252);const r=(0,s.Wm)("h1",{id:"verdaccio-私库",tabindex:"-1"},[(0,s.Wm)("a",{class:"header-anchor",href:"#verdaccio-私库","aria-hidden":"true"},"#"),(0,s.Uk)(" Verdaccio 私库")],-1),l=(0,s.Wm)("p",null,"Verdaccio 是一个 Node.js 创建的轻量的私有 npm proxy registry，所有您发布的包是私有的并且访问权限仅取决于您的配置。",-1),i={href:"https://github.com/verdaccio/verdaccio",target:"_blank",rel:"noopener noreferrer"},c=(0,s.Uk)("verdaccio github"),t={href:"https://verdaccio.org/docs/zh-CN/installation",target:"_blank",rel:"noopener noreferrer"},o=(0,s.Uk)("verdaccio 中文文档"),d=(0,s.uE)('<p><strong>源（Registry）是什么？</strong></p><ul><li><p>源（Registry）是用于管理包（Package）信息的存储库，其实现了存储 CommonJS 兼容包的源规范。</p></li><li><p>提供兼容 npm 客户端（yarn、npm 或 pnpm）的接口（API）。</p></li><li><p>语义版本号（Semantic Versioning）兼容（semver）。</p></li></ul><h2 id="安装-verdaccio" tabindex="-1"><a class="header-anchor" href="#安装-verdaccio" aria-hidden="true">#</a> 安装 Verdaccio</h2><p>使用<code>npm</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install -g verdaccio\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>使用<code>yarn</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yarn global add verdaccio\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="使用-verdaccio" tabindex="-1"><a class="header-anchor" href="#使用-verdaccio" aria-hidden="true">#</a> 使用 Verdaccio</h2><ol><li>执行 CLI 命令</li><li>设置<code>registry</code>，任选一种方法。</li></ol><p>执行 CLI 命令</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>verdaccio\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>设置<code>registry</code>，你可以通过在全局环境下设置，让你的所有项目使用上自定义的源（Registry）</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>npm set registry http://localhost:8082/\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>或者在命令行中使用 npm 参数 --registry</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>npm install lodash --registry http://localhost:8082/\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>或使用<code>yarn</code></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>yarn config set registry http://localhost:8082/\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>也可以添加<code>.npmrc</code>文件，定义<code>registry</code></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>registry=http://localhost:8082/\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>或者在<code>package.json</code>中设置<code>publishConfig</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  <span class="token string">&quot;publishConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string">&quot;registry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8082/&quot;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="cli-命令" tabindex="-1"><a class="header-anchor" href="#cli-命令" aria-hidden="true">#</a> cli 命令</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>verdaccio --listen 4000 --config ~./config.yaml\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',23),p={href:"https://verdaccio.org/docs/zh-CN/cli",target:"_blank",rel:"noopener noreferrer"},m=(0,s.Uk)("cli 命令"),u={href:"https://segmentfault.com/a/1190000019075126",target:"_blank",rel:"noopener noreferrer"},g=(0,s.Uk)("https://segmentfault.com/a/1190000019075126"),h={href:"https://www.jianshu.com/p/0df0183db3b8",target:"_blank",rel:"noopener noreferrer"},b=(0,s.Uk)("https://www.jianshu.com/p/0df0183db3b8"),v=(0,s.Wm)("h2",{id:"内部包和外部包之间",tabindex:"-1"},[(0,s.Wm)("a",{class:"header-anchor",href:"#内部包和外部包之间","aria-hidden":"true"},"#"),(0,s.Uk)(" 内部包和外部包之间")],-1),f=(0,s.Wm)("p",null,"最小化影响原则。 当使用 yarn 或 npm 的时候，依旧是走原有的配置地址。 只有当安装内部包的时候，才会去我们自己的服务器上下载。 修改 registry，指向内部地址，有两种方式，一种是安装的时候直接使用，这种方法是一次性的，更适合全局包。因为，当代码上传到 github 之后，ci-cd 工具使用 npm 会找到不 registry。 添加一个配置文件，在里面定义 registry，更适合本地包，",-1),k={render:function(e,n){const a=(0,s.up)("OutboundLink");return(0,s.wg)(),(0,s.j4)(s.HY,null,[r,l,(0,s.Wm)("p",null,[(0,s.Wm)("a",i,[c,(0,s.Wm)(a)])]),(0,s.Wm)("p",null,[(0,s.Wm)("a",t,[o,(0,s.Wm)(a)])]),d,(0,s.Wm)("p",null,[(0,s.Wm)("a",p,[m,(0,s.Wm)(a)])]),(0,s.Wm)("p",null,[(0,s.Wm)("a",u,[g,(0,s.Wm)(a)])]),(0,s.Wm)("p",null,[(0,s.Wm)("a",h,[b,(0,s.Wm)(a)])]),v,f],64)}}}}]);