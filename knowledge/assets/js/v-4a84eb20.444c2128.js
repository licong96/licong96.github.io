"use strict";(self.webpackChunkknowledge=self.webpackChunkknowledge||[]).push([[4155],{5532:(e,l,i)=>{i.r(l),i.d(l,{data:()=>a});const a={key:"v-4a84eb20",path:"/web-developer/back-end/wechat/cgi-bin.html",title:"Node.js开发公众号",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"使用到的技术",slug:"使用到的技术",children:[{level:3,title:"注意点",slug:"注意点",children:[]}]},{level:2,title:"第一部分",slug:"第一部分",children:[{level:3,title:"测试公众号",slug:"测试公众号",children:[]},{level:3,title:"access_token",slug:"access-token",children:[]}]}],filePathRelative:"web-developer/back-end/wechat/cgi-bin.md",git:{updatedTime:1646300916e3,contributors:[{name:"黎聪",email:"licong23@xdf.cn",commits:1}]}}},8031:(e,l,i)=>{i.r(l),i.d(l,{default:()=>t});var a=i(6252);const c=(0,a.uE)('<h1 id="node-js开发公众号" tabindex="-1"><a class="header-anchor" href="#node-js开发公众号" aria-hidden="true">#</a> Node.js开发公众号</h1><ul><li>本地连接上我的服务器</li><li>把我的服务器用起来<code>casssb.com</code>，接入微信开发</li></ul><h2 id="使用到的技术" tabindex="-1"><a class="header-anchor" href="#使用到的技术" aria-hidden="true">#</a> 使用到的技术</h2><ul><li>js-sdk</li><li>yield</li><li>koa</li><li>bluebird</li><li>Request</li><li>ejs</li><li>lodash</li><li>raw-body</li><li>sha1</li><li>xml2js</li></ul><h3 id="注意点" tabindex="-1"><a class="header-anchor" href="#注意点" aria-hidden="true">#</a> 注意点</h3><ul><li>配置接入流程</li><li>加密认证环节</li><li>access_token</li></ul><h2 id="第一部分" tabindex="-1"><a class="header-anchor" href="#第一部分" aria-hidden="true">#</a> 第一部分</h2><ul><li>域名服务器环境配置</li></ul><p><strong>服务器</strong></p><ul><li>node端配置在<code>/api.casssb.com/wechat</code>中</li></ul><h3 id="测试公众号" tabindex="-1"><a class="header-anchor" href="#测试公众号" aria-hidden="true">#</a> 测试公众号</h3>',11),n={href:"https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index",target:"_blank",rel:"noopener noreferrer"},d=(0,a.Uk)("https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index"),s=(0,a.uE)('<p>测试号信息：</p><ul><li>appID: wx2f0d7dd289938b89</li><li>appsecret: cd5d3a78afa343c512cac6ef0a9bf234</li></ul><p>接口配置信息：</p><ul><li>URL: http://api.casssb.com/wechat/</li><li>Token: casssbwechattoken</li></ul><p>JS接口安全域名：</p><ul><li>域名: http://api.casssb.com</li></ul><h3 id="access-token" tabindex="-1"><a class="header-anchor" href="#access-token" aria-hidden="true">#</a> access_token</h3><blockquote><p>和微信交互的钥匙，几乎每个接口都会用到</p></blockquote><ul><li>每2个小时失效，需要重新获取</li><li>更新之后，之前的就不能再用</li></ul><p>我们的系统每个2小时启动去刷新一次<code>access_token</code>，这样可以保持最新的。为了方便频繁调用，需要把<code>access_token</code>存储在一个文件里。</p>',10),t={render:function(e,l){const i=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.j4)(a.HY,null,[c,(0,a.Wm)("ul",null,[(0,a.Wm)("li",null,[(0,a.Wm)("a",n,[d,(0,a.Wm)(i)])])]),s],64)}}}}]);